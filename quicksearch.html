<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"main.js.html":{"id":"main.js.html","title":"Source: main.js","body":" Documentation Classes Constamp Source: main.js 'use strict' import dayjs from 'dayjs' import utc from 'dayjs/plugin/utc' import { createHash } from 'crypto' import { hostname, userInfo, type, platform, totalmem } from 'os' dayjs.extend(utc) dayjs.utc() // console.log(dayjs.utc().isUTC()); const { arch, cwd, execPath } = process const { bigint } = process.hrtime const { PWD } = process.env const hashAlgorithm = 'Whirlpool' const hashEncoding = 'hex' /** * A class that produces context stamp instances. */ class Constamp { #isCopy = false #template = Constamp.format #t = { t: dayjs().utc(), b: bigint() } #toJson = () =&gt; { const o = { t: { t: this.#t.t, b: this.#t.b.toString() } } const params = [this.#w, this.#d] const labels = ['w', 'd'] for (let i = 0; i &lt; params.length; i++) { const p = params[i] o[labels[i]] = p } return JSON.stringify(o) } #d = { cwd: cwd(), pwd: PWD, execPath } #w = { arch, user: userInfo(), hostname: hostname(), type: type(), platform: platform(), totalmem: totalmem() } #h = null #hashes = {} /** * constructor - Create an immutable stamp relating to various data, including the * * - **D**: execPath, cwd and pwd, * - **T**: time and hrtime, and * - **W**: type, user info, arch, hostname, totalmem and platform. * * @param {object} o = { format: null } parameters * @param {?string} o.format a dayjs-recognizeable template string * @param {?string} o.json a valid json string to copy from */ constructor (o = { format: null, json: null }) { const formatJson = (j) =&gt; j.replace(/\\s/g, '') const hexmatcher = /^[0-9a-f]+$/ const { format, json } = o let hashes = null let djs = null try { if (json) { hashes = JSON.parse(json) if (['t', 'w', 'd'].every(v =&gt; (v in hashes) &amp;&amp; (typeof hashes[v] === 'string'))) { djs = dayjs(hashes.t).utc() if (['w', 'd'].every(v =&gt; hexmatcher.test(hashes[v])) &amp;&amp; djs.isValid()) { this.#isCopy = true } } } } catch (e) { throw e } finally { this.#template = (typeof format === 'string') ? format : this.#template this.#t.t = (this.#isCopy &amp;&amp; djs) ? djs : this.#t.t const str = formatJson(this.#toJson()) const hash = createHash(hashAlgorithm) hash.update(str) this.#h = hash.digest(hashEncoding) const ps = [ 'd', 'w' ] const vs = [ this.#d, this.#w ] ps.map((p, i) =&gt; { if (this.#isCopy) { this.#hashes[p] = hashes[p] } else { const h = createHash(hashAlgorithm) h.update(formatJson(JSON.stringify(vs[i]))) this.#hashes[p] = h.digest(hashEncoding) } }) Object.freeze(this.#hashes) Object.freeze(this.#t) Object.freeze(this.#d) Object.freeze(this.#w) Object.freeze(this) } } /** * get isCopy - was this instance copied from json? * * @return {boolean} true IFF it was made from a valid json string */ get isCopy () { return this.#isCopy } /** * get time - the timestamp UTC epoch time as dayjs * * @return {dayjs} approximate time of instantiation * @see {@link https://github.com/iamkun/dayjs/blob/dev/docs/en/API-reference.md#format-formatstringwithtokens-string} */ get time () { return this.#t.t } /** * get timeString - the formatted timestamp UTC epoch time * * @return {string} the formated approximate time of instantiation * @see {@link constructor} * @see {@link get time} * @see {@link https://github.com/iamkun/dayjs} */ get timeString () { return this.#t.t.format(this.#template) } /** * get hrtime - the timestamp high-resolution real time * * @return {bigint} approximate real time of instantiation * @see {@link https://nodejs.org/api/process.html#process_process_hrtime_bigint} */ get hrtime () { return this.#t.b } /** * get user - the logged-in user's name * * @return {string} user's name * @see {@link https://nodejs.org/api/process.html#process_process_env} */ get user () { return this.#w.user } /** * get arch - operating system cpu architecture * * @return {string} architecture for which node.js binary was compiled * @see {@link https://nodejs.org/api/process.html#process_process_arch} */ get arch () { return this.#w.arch } /** * get type - operating system type * * @return {string} operating system as returned by `uname(3)` * @see {@link https://nodejs.org/api/os.html#os_os_type} */ get type () { return this.#w.type } /** * get hostname - system's host name * * @return {string} host name * @see {@link https://nodejs.org/api/os.html#os_os_hostname} */ get hostname () { return this.#w.hostname } /** * get platform - operating system platform as set during node.js compile time * * @return {string} platform * @see {@link https://nodejs.org/api/os.html#os_os_platform} */ get platform () { return this.#w.platform } /** * get totalmem - total system memory * * @return {number} integer number of bytes * @see {@link https://nodejs.org/api/os.html#os_os_totalmem} */ get totalmem () { return this.#w.totalmem } /** * get cwd - current working directory of the Node.js process * * @return {string} current working directory * @see {@link https://nodejs.org/api/process.html#process_process_cwd} */ get cwd () { return this.#d.cwd } /** * get pwd - current working directory of the shell * * @return {string} current working directory * @see {@link https://nodejs.org/api/process.html#process_process_env} */ get pwd () { return this.#d.pwd } /** * get execPath - absolute pathname of the executable that started the Node.js process * * @return {string} absolute pathname * @see {@link https://nodejs.org/api/process.html#process_process_execpath} */ get execPath () { return this.#d.execPath } [Symbol.toPrimitive] (hint) { switch (hint) { case 'number': return this.valueOf() default: return this.toString() } } /** * toJson - serialize as a JSON string containg the fields: * * - **d**: hash, * - **t**: utc, and * - **w**: hash. * * @return {string} JSON */ toJson () { return JSON.stringify({ t: this.time, ...this.#hashes }) } /** * toString - a hash string representation of instance * * @return {string} hash hex */ toString () { return this.#h } /** * sharesDWith - determine whether this instance has the same directories as another Constamp instance * * @param {Constamp} b the other instance to compare with * @return {boolean} true IFF d hashes equal */ sharesDWith (b) { if (!(b instanceof Constamp)) { return false } return this.#hashes.d === b.#hashes.d } /** * sharesTimeWith - determine whether this instance has the same epoch time as another Constamp instance * * @param {Constamp} b the other instance to compare with * @return {boolean} true IFF timestamps equal */ sharesTimeWith (b) { if (!(b instanceof Constamp)) { return false } return this.time.isSame(b.time) } /** * sharesWWith - determine whether this instance has the same who as another Constamp instance * * @param {Constamp} b the other instance to compare with * @return {boolean} true IFF w hashes equal */ sharesWWith (b) { if (!(b instanceof Constamp)) { return false } return this.#hashes.w === b.#hashes.w } /** * valueOf - the timestamp UTC epoch time as number * * @return {number} UTC epoch ms * @see {@link https://github.com/iamkun/dayjs/blob/HEAD/docs/en/API-reference.md#unix-timestamp-milliseconds-valueof} */ valueOf () { return this.#t.t.valueOf() } } Object.defineProperties(Constamp, { /** * the default timestamp format * @default 'YYYY-MM-DD HH:mm ss.SSS' * @memberof Constamp * @name format * @static */ format: { value: 'YYYY-MM-DD HH:mm ss.SSS', enumerable: true, configurable: false, writable: false }, /** * determine whether given arguments share dir locations * @memberof Constamp * @method * @name D * @param {Constamp} a The first Constamp to compare * @param {Constamp} b The other Constamp to compare * @static */ D: { value: (a, b) =&gt; { return (a instanceof Constamp) &amp;&amp; a.sharesDWith(b) }, enumerable: true, configurable: false, writable: false }, /** * determine whether given arguments share epoch timestamps * @memberof Constamp * @method * @name T * @param {Constamp} a The first Constamp to compare * @param {Constamp} b The other Constamp to compare * @static */ T: { value: (a, b) =&gt; { return (a instanceof Constamp) &amp;&amp; a.sharesTimeWith(b) }, enumerable: true, configurable: false, writable: false }, /** * determine whether given arguments share user/platform * @memberof Constamp * @method * @name W * @param {Constamp} a The first Constamp to compare * @param {Constamp} b The other Constamp to compare * @static */ W: { value: (a, b) =&gt; { return (a instanceof Constamp) &amp;&amp; a.sharesWWith(b) }, enumerable: true, configurable: false, writable: false }, /** * @memberof Constamp * @method * @name sameDirs * @see Constamp.D * @static */ sameDirs: { get () { return Constamp.D }, enumerable: true, configurable: false }, /** * @memberof Constamp * @method * @name sameTimes * @see Constamp.T * @static */ sameTimes: { get () { return Constamp.T }, enumerable: true, configurable: false }, /** * @memberof Constamp * @method * @name sameWhos * @see Constamp.W * @static */ sameWhos: { get () { return Constamp.W }, enumerable: true, configurable: false } }) export { Constamp } × Search results Close "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Classes Constamp Classes Classes Constamp × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Classes Constamp — constamp — Documentation Context stamping. Instead of just time stamping a process or event, context stamp it to reveal the: T: Epoch time and high-resolution process time, W: Who is doing all of this JavaScript, including the user and computing architecture, D: Directories where all of this JavaScript is being done. Installation Run npm install constamp Usage This module exports a class Constamp. The class creates an immutable object. Stamping import { Constamp } from 'constamp' const c = Constamp() Partially cloning a stamp: const cCopy = Constamp({ json: c.toJson() }) Using a dayjs format string: const cFormat = Constamp({ format: 'DD/MM/YYYY' }) Command-line constamp -h Usage $ constamp &lt;command&gt; [options] Available Commands show Display local context stamp (raw) info. save Save the local context stamp (hash) to a file. load Load a saved context stamp file for comparison For more info, run any command with the `--help` flag $ constamp show --help $ constamp save --help Options -v, --version Displays current version -h, --help Displays this message Testing npm test × Search results Close "},"Constamp.html":{"id":"Constamp.html","title":"Class: Constamp","body":" Documentation Classes Constamp Class: Constamp Constamp A class that produces context stamp instances. new Constamp(o) constructor - Create an immutable stamp relating to various data, including the D: execPath, cwd and pwd, T: time and hrtime, and W: type, user info, arch, hostname, totalmem and platform. Parameters: Name Type Description o object = { format: null } parameters Properties Name Type Argument Description format string &lt;nullable&gt; a dayjs-recognizeable template string json string &lt;nullable&gt; a valid json string to copy from Source: main.js, line 68 Members &lt;static&gt; format the default timestamp format Default Value: 'YYYY-MM-DD HH:mm ss.SSS' Source: main.js, line 310 arch get arch - operating system cpu architecture Source: main.js, line 165 See: https://nodejs.org/api/process.html#process_process_arch cwd get cwd - current working directory of the Node.js process Source: main.js, line 210 See: https://nodejs.org/api/process.html#process_process_cwd execPath get execPath - absolute pathname of the executable that started the Node.js process Source: main.js, line 228 See: https://nodejs.org/api/process.html#process_process_execpath hostname get hostname - system's host name Source: main.js, line 183 See: https://nodejs.org/api/os.html#os_os_hostname hrtime get hrtime - the timestamp high-resolution real time Source: main.js, line 147 See: https://nodejs.org/api/process.html#process_process_hrtime_bigint isCopy get isCopy - was this instance copied from json? Source: main.js, line 118 platform get platform - operating system platform as set during node.js compile time Source: main.js, line 192 See: https://nodejs.org/api/os.html#os_os_platform pwd get pwd - current working directory of the shell Source: main.js, line 219 See: https://nodejs.org/api/process.html#process_process_env time get time - the timestamp UTC epoch time as dayjs Source: main.js, line 127 See: https://github.com/iamkun/dayjs/blob/dev/docs/en/API-reference.md#format-formatstringwithtokens-string timeString get timeString - the formatted timestamp UTC epoch time Source: main.js, line 138 See: constructor time https://github.com/iamkun/dayjs totalmem get totalmem - total system memory Source: main.js, line 201 See: https://nodejs.org/api/os.html#os_os_totalmem type get type - operating system type Source: main.js, line 174 See: https://nodejs.org/api/os.html#os_os_type user get user - the logged-in user's name Source: main.js, line 156 See: https://nodejs.org/api/process.html#process_process_env Methods &lt;static&gt; D(a, b) determine whether given arguments share dir locations Parameters: Name Type Description a Constamp The first Constamp to compare b Constamp The other Constamp to compare Source: main.js, line 323 &lt;static&gt; sameDirs() Source: main.js, line 374 See: Constamp.D &lt;static&gt; sameTimes() Source: main.js, line 388 See: Constamp.T &lt;static&gt; sameWhos() Source: main.js, line 402 See: Constamp.W &lt;static&gt; T(a, b) determine whether given arguments share epoch timestamps Parameters: Name Type Description a Constamp The first Constamp to compare b Constamp The other Constamp to compare Source: main.js, line 340 &lt;static&gt; W(a, b) determine whether given arguments share user/platform Parameters: Name Type Description a Constamp The first Constamp to compare b Constamp The other Constamp to compare Source: main.js, line 357 sharesDWith(b) sharesDWith - determine whether this instance has the same directories as another Constamp instance Parameters: Name Type Description b Constamp the other instance to compare with Source: main.js, line 268 Returns: true IFF d hashes equal Type boolean sharesTimeWith(b) sharesTimeWith - determine whether this instance has the same epoch time as another Constamp instance Parameters: Name Type Description b Constamp the other instance to compare with Source: main.js, line 280 Returns: true IFF timestamps equal Type boolean sharesWWith(b) sharesWWith - determine whether this instance has the same who as another Constamp instance Parameters: Name Type Description b Constamp the other instance to compare with Source: main.js, line 292 Returns: true IFF w hashes equal Type boolean toJson() toJson - serialize as a JSON string containg the fields: d: hash, t: utc, and w: hash. Source: main.js, line 248 Returns: JSON Type string toString() toString - a hash string representation of instance Source: main.js, line 259 Returns: hash hex Type string valueOf() valueOf - the timestamp UTC epoch time as number Source: main.js, line 304 See: https://github.com/iamkun/dayjs/blob/HEAD/docs/en/API-reference.md#unix-timestamp-milliseconds-valueof Returns: UTC epoch ms Type number × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
